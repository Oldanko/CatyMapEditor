CC := g++
SRCDIR := src
BUILDDIR := build
TARGET := bin/output

SRCTEXT := cpp
SOURCES := $(shell find $(SRCDIR) -type f -name *.$(SRCTEXT))
#OBJECTS := $(patsubst $(SRCDIR)/%,$(BUILDDIR)/%,$(SOURCES:.$(SRCTEXT)=.o))
OBJECTS := $(addsufix .o, $(basename $(SOURCES)))

FLAGS := -g -std=c++11 # -Wall
LIB := -lglfw -lGL -lGLEW -lSOIL
INC := -I include /usr/include/libdrm

$(TARGET): $(OBJECTS)
	$(CC) -o $(TARGET) $(LIB)

$(BUILDDIR)/%.o: $(SRCDIR)/%.$(SRCEXT)
	@mkdir -p $(BUILDDIR)
	$(CC) $(CFLAGS) $(INC) -c -o

clean:
	rm -r $(BUILDDIR) $(TARGET)

# Tests
#tester:
#  $(CC) $(CFLAGS) test/tester.cpp $(INC) $(LIB) -o bin/tester

# Spikes
#ticket:
#  $(CC) $(CFLAGS) spikes/ticket.cpp $(INC) $(LIB) -o bin/ticket

.PHONY: clean
